---

title: Trove query parser


keywords: fastai
sidebar: home_sidebar

summary: "Use `parse_query` to convert a search query from the Trove web interface into a set of parameters that the API will understand."
description: "Use `parse_query` to convert a search query from the Trove web interface into a set of parameters that the API will understand."
nb_path: "00_parser.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_parser.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Functions">Functions<a class="anchor-link" href="#Functions"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="format_date" class="doc_header"><code>format_date</code><a href="https://github.com/wragge/trove_query_parser/tree/master/trove_query_parser/parser.py#L11" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>format_date</code>(<strong><code>date</code></strong>, <strong><code>start</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>The web interface uses YYYY-MM-DD dates, but the API expects YYYY-MM-DDT00:00:00Z. Reformat dates accordingly.</p>
<p>Also the start date in an API query needs to be set to the day before you want. So if this is a start date, take it back in time by a day.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="parse_query" class="doc_header"><code>parse_query</code><a href="https://github.com/wragge/trove_query_parser/tree/master/trove_query_parser/parser.py#L24" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>parse_query</code>(<strong><code>query</code></strong>)</p>
</blockquote>
<p>Converts the parameters of a search using the Trove web interface into a form the API will understand.</p>
<p>Parameters:</p>
<ul>
<li><code>query</code> â€“ the url of a search in the Trove newspapers &amp; gazettes category</li>
</ul>
<p>Returns:</p>
<ul>
<li>a dict containing the parameters (multiple values will be in a list)</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Basic-usage">Basic usage<a class="anchor-link" href="#Basic-usage"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Here's the url of a search in Trove's newspapers: <a href="https://trove.nla.gov.au/search/category/newspapers?keyword=wragge&amp;l-artType=newspapers&amp;l-state=Queensland&amp;l-category=Article&amp;l-illustrationType=Cartoon">https://trove.nla.gov.au/search/category/newspapers?keyword=wragge&amp;l-artType=newspapers&amp;l-state=Queensland&amp;l-category=Article&amp;l-illustrationType=Cartoon</a></p>
<p>If we feed this url to <code>parse_query()</code> we get back a dict with the query parameters translated into a form the Trove API understands.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">params</span> <span class="o">=</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/category/newspapers?keyword=wragge&amp;l-artType=newspapers&amp;l-state=Queensland&amp;l-category=Article&amp;l-illustrationType=Cartoon&#39;</span><span class="p">)</span>
<span class="n">params</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;q&#39;: &#39;wragge&#39;,
 &#39;zone&#39;: &#39;newspaper&#39;,
 &#39;l-state&#39;: [&#39;Queensland&#39;],
 &#39;l-category&#39;: [&#39;Article&#39;],
 &#39;l-illustrated&#39;: &#39;true&#39;,
 &#39;l-illtype&#39;: [&#39;Cartoon&#39;]}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If you want to use this to get data back from the Trove API, you'll need to add a <code>key</code> parameter with your Trove API key. You might also want to change the <code>encoding</code> of the results to 'json'. Then you can just give the parameters as <code>params</code> to <code>requests</code>. For example:</p>
<div class="highlight"><pre><span></span><span class="n">params</span> <span class="o">=</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/category/newspapers?keyword=wragge&amp;l-artType=newspapers&amp;l-state=Queensland&amp;l-category=Article&amp;l-illustrationType=Cartoon&#39;</span><span class="p">)</span>
<span class="n">params</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mYApiKEY&#39;</span>
<span class="n">params</span><span class="p">[</span><span class="s1">&#39;encoding&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;json&#39;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://api.trove.nla.gov.au/v2/result&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
<p>Assuming your API key is valid, this will return the following results:</p>
<div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;response&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="s1">&#39;wragge&#39;</span><span class="p">,</span>
  <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper&#39;</span><span class="p">,</span>
    <span class="s1">&#39;records&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;s&#39;</span><span class="p">:</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span>
     <span class="s1">&#39;n&#39;</span><span class="p">:</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span>
     <span class="s1">&#39;total&#39;</span><span class="p">:</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span>
     <span class="s1">&#39;article&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;76672882&#39;</span><span class="p">,</span>
       <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;/newspaper/76672882&#39;</span><span class="p">,</span>
       <span class="s1">&#39;heading&#39;</span><span class="p">:</span> <span class="s1">&#39;THE POLITICAL STIGER YORTEX.&#39;</span><span class="p">,</span>
       <span class="s1">&#39;category&#39;</span><span class="p">:</span> <span class="s1">&#39;Article&#39;</span><span class="p">,</span>
       <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;274&#39;</span><span class="p">,</span>
        <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;The Charleville Times (Brisbane, Qld. : 1896 - 1954)&#39;</span><span class="p">},</span>
       <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1901-10-12&#39;</span><span class="p">,</span>
       <span class="s1">&#39;page&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
       <span class="s1">&#39;pageSequence&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
       <span class="s1">&#39;relevance&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;score&#39;</span><span class="p">:</span> <span class="s1">&#39;250.99701&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;very relevant&#39;</span><span class="p">},</span>
       <span class="s1">&#39;snippet&#39;</span><span class="p">:</span> <span class="s1">&#39;PREMIER PHILP: &quot;I think that</span><span class="se">\&#39;</span><span class="s1">s a better shot than Wragge</span><span class="se">\&#39;</span><span class="s1">s.&quot;&#39;</span><span class="p">,</span>
       <span class="s1">&#39;troveUrl&#39;</span><span class="p">:</span> <span class="s1">&#39;https://trove.nla.gov.au/ndp/del/article/76672882?searchTerm=wragge&#39;</span><span class="p">},</span>
      <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;50294024&#39;</span><span class="p">,</span>
       <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;/newspaper/50294024&#39;</span><span class="p">,</span>
       <span class="s1">&#39;heading&#39;</span><span class="p">:</span> <span class="s1">&#39;We nearly broke the drought  (. . . WE THINK)&#39;</span><span class="p">,</span>
       <span class="s1">&#39;category&#39;</span><span class="p">:</span> <span class="s1">&#39;Article&#39;</span><span class="p">,</span>
       <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;12&#39;</span><span class="p">,</span>
        <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;The Courier-Mail (Brisbane, Qld. : 1933 - 1954)&#39;</span><span class="p">},</span>
       <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1952-02-16&#39;</span><span class="p">,</span>
       <span class="s1">&#39;page&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
       <span class="s1">&#39;pageSequence&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
       <span class="s1">&#39;relevance&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;score&#39;</span><span class="p">:</span> <span class="s1">&#39;12.74085&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;very relevant&#39;</span><span class="p">},</span>
       <span class="s1">&#39;snippet&#39;</span><span class="p">:</span> <span class="s1">&#39;WE were determined to try our hand at rainmaking, and&#39;</span><span class="p">,</span>
       <span class="s1">&#39;troveUrl&#39;</span><span class="p">:</span> <span class="s1">&#39;https://trove.nla.gov.au/ndp/del/article/50294024?searchTerm=wragge&#39;</span><span class="p">},</span>
      <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;76372015&#39;</span><span class="p">,</span>
       <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;/newspaper/76372015&#39;</span><span class="p">,</span>
       <span class="s1">&#39;heading&#39;</span><span class="p">:</span> <span class="s1">&#39;Digest What YOU Eat.&#39;</span><span class="p">,</span>
       <span class="s1">&#39;category&#39;</span><span class="p">:</span> <span class="s1">&#39;Article&#39;</span><span class="p">,</span>
       <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;266&#39;</span><span class="p">,</span>
        <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;The Western Champion and General Advertiser for the Central-Western Districts (Barcaldine, Qld. : 1892 - 1922)&#39;</span><span class="p">},</span>
       <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;1906-01-08&#39;</span><span class="p">,</span>
       <span class="s1">&#39;page&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
       <span class="s1">&#39;pageSequence&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
       <span class="s1">&#39;relevance&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;score&#39;</span><span class="p">:</span> <span class="s1">&#39;5.734701&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;very relevant&#39;</span><span class="p">},</span>
       <span class="s1">&#39;snippet&#39;</span><span class="p">:</span> <span class="s2">&quot;The reason why any wholesome food is not properly digested is because the stomach lacks some important element of digestion. Some stomach&#39; lack peptone, others are deficient in gastric juice or hydrochloric&quot;</span><span class="p">,</span>
       <span class="s1">&#39;troveUrl&#39;</span><span class="p">:</span> <span class="s1">&#39;https://trove.nla.gov.au/ndp/del/article/76372015?searchTerm=wragge&#39;</span><span class="p">}]}}]}}</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that the API includes some additional parameters such as <code>reclevel</code> and <code>include</code>. Have a look at the <a href="https://troveconsole.herokuapp.com/">Trove API Console</a> for examples.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Tests">Tests<a class="anchor-link" href="#Tests"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Simple-search-with-facets">Simple search with facets<a class="anchor-link" href="#Simple-search-with-facets"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Multiple keywords are just passed along as is and are combined with a boolean <code>AND</code>. This is the same in both the Simple and Advanced search.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;wragge weather&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper,gazette&#39;</span><span class="p">}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/category/newspapers?keyword=wragge%20weather&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Multiple keywords with <code>OR</code> are passed along as is.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;wragge OR weather&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper,gazette&#39;</span><span class="p">}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/category/newspapers?keyword=wragge%20OR%20weather&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Phrase search passed along as is.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;&quot;inclement wragge&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper,gazette&#39;</span><span class="p">}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/category/newspapers?keyword=</span><span class="si">%22i</span><span class="s1">nclement%20wragge%22&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>More complex queries such as date ranges should be passed along as is.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/category/newspapers?keyword=wragge</span><span class="si">%20d</span><span class="s1">ate%3A%5B1901%20TO</span><span class="si">%201903%</span><span class="s1">5D&amp;l-artType=newspapers&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;q&#39;: &#39;wragge date:[1901 TO 1903]&#39;, &#39;zone&#39;: &#39;newspaper&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Limit to gazettes using facets.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;wragge&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;gazette&#39;</span><span class="p">}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/category/newspapers?keyword=wragge&amp;l-artType=gazette&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Limit state to NSW using facets.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;wragge&#39;</span><span class="p">,</span> <span class="s1">&#39;l-state&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;New South Wales&#39;</span><span class="p">],</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper,gazette&#39;</span><span class="p">}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/category/newspapers?keyword=wragge&amp;l-state=New%20South%20Wales&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Limit newspaper to SMH using facets.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;wragge&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper&#39;</span><span class="p">,</span> <span class="s1">&#39;l-title&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;35&#39;</span><span class="p">]}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/category/newspapers?keyword=wragge&amp;l-artType=newspapers&amp;l-title=35&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Limit to 'Article' category using facets.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;wragge&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper&#39;</span><span class="p">,</span> <span class="s1">&#39;l-category&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Article&#39;</span><span class="p">]}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/category/newspapers?keyword=wragge&amp;l-artType=newspapers&amp;l-category=Article&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Limit to specific decade using facets.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/category/newspapers?keyword=wragge&amp;l-artType=newspapers&amp;l-decade=190&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;q&#39;: &#39;wragge&#39;, &#39;zone&#39;: &#39;newspaper&#39;, &#39;l-decade&#39;: [&#39;190&#39;]}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Limit to specific year using facets.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/category/newspapers?keyword=wragge&amp;l-artType=newspapers&amp;l-decade=190&amp;l-year=1903&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;q&#39;: &#39;wragge&#39;, &#39;zone&#39;: &#39;newspaper&#39;, &#39;l-decade&#39;: [&#39;190&#39;], &#39;l-year&#39;: [&#39;1903&#39;]}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Limit to articles with illustration type of 'Photo' with facets.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;wragge&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper&#39;</span><span class="p">,</span> <span class="s1">&#39;l-illustrated&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span> <span class="s1">&#39;l-illtype&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Photo&#39;</span><span class="p">]}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/category/newspapers?keyword=wragge&amp;l-artType=newspapers&amp;l-illustrationType=Photo&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Limit to articles containing more than 1,000 words using facets.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;wragge&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper&#39;</span><span class="p">,</span> <span class="s1">&#39;l-word&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;1000+ Words&#39;</span><span class="p">]}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/category/newspapers?keyword=wragge&amp;l-artType=newspapers&amp;l-word=1000%2B%20Words&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Advanced-search">Advanced search<a class="anchor-link" href="#Advanced-search"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Multiple keywords in 'Any of these words' box.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;(wragge OR weather)&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper,gazette&#39;</span><span class="p">}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/advanced/category/newspapers?keyword.any=wragge%20weather&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Multiple keywords in 'The phrase' box.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;&quot;inclement wragge&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper,gazette&#39;</span><span class="p">}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/advanced/category/newspapers?keyword.phrase=inclement%20wragge&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Keywords in 'All of these words' and 'Without these words' boxes.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;wragge AND NOT (weather)&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper,gazette&#39;</span><span class="p">}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/advanced/category/newspapers?keyword.not=weather&amp;keyword=wragge&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Limit to a specific date range.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;wragge date:[1899-12-31T00:00:00Z TO 1900-02-04T00:00:00Z]&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper&#39;</span><span class="p">}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/advanced/category/newspapers?keyword=wragge&amp;date.from=1900-01-01&amp;date.to=1900-02-04&amp;l-advArtType=newspapers&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Limit to a specific state.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;wragge&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper&#39;</span><span class="p">,</span> <span class="s1">&#39;l-state&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Queensland&#39;</span><span class="p">]}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/advanced/category/newspapers?keyword=wragge&amp;l-advArtType=newspapers&amp;l-advstate=Queensland&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Limit to specific newspapers.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;wragge&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper&#39;</span><span class="p">,</span> <span class="s1">&#39;l-title&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;16&#39;</span><span class="p">,</span> <span class="s1">&#39;1055&#39;</span><span class="p">]}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/advanced/category/newspapers?keyword=wragge&amp;l-advArtType=newspapers&amp;l-advtitle=16&amp;l-advtitle=1055&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Limit to a specific category.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;wragge&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper&#39;</span><span class="p">,</span> <span class="s1">&#39;l-category&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Family Notices&#39;</span><span class="p">]}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/advanced/category/newspapers?keyword=wragge&amp;l-advArtType=newspapers&amp;l-advcategory=Family%20Notices&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Limit to a specific illustration type.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;wragge&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper&#39;</span><span class="p">,</span> <span class="s1">&#39;l-illustrated&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span> <span class="s1">&#39;l-illtype&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Photo&#39;</span><span class="p">]}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/advanced/category/newspapers?keyword=wragge&amp;l-advArtType=newspapers&amp;l-advIllustrationType=Photo&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Limit to a specific number of words.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;wragge&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span> <span class="s1">&#39;newspaper&#39;</span><span class="p">,</span> <span class="s1">&#39;l-word&#39;</span><span class="p">:</span> <span class="s1">&#39;100 - 1000 Words&#39;</span><span class="p">}</span> <span class="o">==</span> <span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/advanced/category/newspapers?keyword=wragge&amp;l-advArtType=newspapers&amp;l-advWord=100%20-</span><span class="si">%201000%</span><span class="s1">20Words&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">parse_query</span><span class="p">(</span><span class="s1">&#39;https://trove.nla.gov.au/search/advanced/category/newspapers?keyword=rabbits&amp;date.from=1900-02-01&amp;date.to=1900-05-30&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;q&#39;: &#39;rabbits date:[1900-01-31T00:00:00Z TO 1900-05-30T00:00:00Z]&#39;,
 &#39;zone&#39;: &#39;newspaper,gazette&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

